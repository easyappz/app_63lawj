openapi: 3.0.3
info:
  title: Social Network API
  description: API for a minimal social network application
  version: 1.0.0
servers:
  - url: /api
    description: API server
paths:
  /auth/register/:
    $ref: './paths/auth-register.yml'
  /auth/login/:
    $ref: './paths/auth-login.yml'
  /auth/logout/:
    $ref: './paths/auth-logout.yml'
  /auth/me/:
    $ref: './paths/auth-me.yml'
  /posts/:
    $ref: './paths/posts-list.yml'
  /posts/create/:
    $ref: './paths/posts-create.yml'
  /posts/{id}/:
    $ref: './paths/posts-detail.yml'
  /posts/{id}/delete/:
    $ref: './paths/posts-delete.yml'
  /posts/{id}/like/:
    $ref: './paths/posts-like.yml'
  /posts/{post_id}/comments/:
    $ref: './paths/comments-list.yml'
  /posts/{post_id}/comments/create/:
    $ref: './paths/comments-create.yml'
  /comments/{id}/:
    $ref: './paths/comments-delete.yml'
  /profile/{id}/:
    $ref: './paths/profile-detail.yml'
  /profile/:
    $ref: './paths/profile-update.yml'
components:
  schemas:
    Member:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        email:
          type: string
          format: email
        username:
          type: string
        first_name:
          type: string
        last_name:
          type: string
        bio:
          type: string
          nullable: true
        avatar_url:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
    Post:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        content:
          type: string
        author:
          $ref: '#/components/schemas/Member'
        likes_count:
          type: integer
          readOnly: true
        is_liked:
          type: boolean
          readOnly: true
        comments_count:
          type: integer
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
    Comment:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        content:
          type: string
        author:
          $ref: '#/components/schemas/Member'
        post_id:
          type: integer
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
    Error:
      type: object
      properties:
        error:
          type: string
        detail:
          type: string
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: sessionid